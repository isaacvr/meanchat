<!DOCTYPE html>
  <html>
  <head>
    <title> Messages </title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../css/laptop.css">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
  </head>
  <body>

    <div class="header-container">
      <h1 class="banner"> Site Header </h1>
    </div>

    <div id="userlist">
      <ul>
        <li class="user-element user-selected" state="active" user-code="pulic-room">
          <img class="avatar" src="./../img/a.png" alt="Public Room">
          <span> Public Room </span>
        </li>
        <li class="user-element" state="active" user-code="Sm9obiBEb2U=">
          <img class="avatar" src="./../img/a.png" alt="John Doe">
          <span> John Doe </span>
        </li>
        <li class="user-element" state="active" user-code="SmFtZXMgU21pdGg=">
          <img class="avatar" src="./../img/a.png" alt="John Doe">
          <span> James Smith </span>
        </li>
        <li class="user-element" user-code="SmFuZSBEb2U=">
          <img class="avatar" src="./../img/a.png" alt="John Doe">
          <span> Jane Doe </span>
        </li>
        <li class="user-element" user-code="TG9yZW56IFBpZXJjZQ==">
          <img class="avatar" src="./../img/a.png" alt="John Doe">
          <span> Lorenz Pierce </span>
        </li>
        <li class="user-element" user-code="Q2xhdWRlIEpvaG5zb24=">
          <img class="avatar" src="./../img/a.png" alt="John Doe">
          <span> Claude Johnson </span>
        </li>
      </ul>
    </div>

    <div id="room-container">
      <input type="text" id="text-input" size="30" placeholder="Type some text..." value="Hello World!!">
      <ul>
        <li id="public-room" class="chat-room">

          <div class="scroll-bar-container">
            <div class="scroll-bar"></div>
          </div>

          <div class="message-container" type="in" from="c2FyYXk=" to="aXNhYWM=">
            <div class="avatar-zone">
              <img class="avatar" src="./../img/a.png">
            </div>
            <div class="message-zone">
              <div class="message"> Public Room Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam
              </div>
            </div>
          </div>
          <div class="message-container" type="out" from="aXNhYWM=" to="c2FyYXk=">
            <div class="message-zone">
              <div class="message"> quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                <img src="./../img/b.jpg"> Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </div>
            </div>
            <div class="avatar-zone">
              <img class="avatar" src="./../img/a.png">
              <img class="avatar-mini" src="./../img/a.png">
            </div>
          </div>
          <div class="message-container" type="out" from="aXNhYWM=" to="c2FyYXk=">
            <div class="message-zone">
              <div class="message"> quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                <img src="./../img/b.jpg"> Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </div>
            </div>
            <div class="avatar-zone">
              <img class="avatar" src="./../img/a.png">
              <img class="avatar-mini" src="./../img/a.png">
            </div>
          </div>
        </li>
        <li id="c2FyYXk=" class="chat-room hidden">

          <div class="scroll-bar-container">
            <div class="scroll-bar"></div>
          </div>

          <div class="message-container" type="in" from="c2FyYXk=" to="aXNhYWM=">
            <div class="avatar-zone">
              <img class="avatar" src="./../img/a.png">
            </div>
            <div class="message-zone">
              <div class="message"> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam
              </div>
            </div>
          </div>
          <div class="message-container" type="out" from="aXNhYWM=" to="c2FyYXk=">
            <div class="message-zone">
              <div class="message"> quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                <img src="./../img/b.jpg"> Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </div>
            </div>
            <div class="avatar-zone">
              <img class="avatar" src="./../img/a.png">
              <img class="avatar-mini" src="./../img/a.png">
            </div>
          </div>
          <div class="message-container" type="out" from="aXNhYWM=" to="c2FyYXk=">
            <div class="message-zone">
              <div class="message"> quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                <img src="./../img/b.jpg"> Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </div>
            </div>
            <div class="avatar-zone">
              <img class="avatar" src="./../img/a.png">
              <img class="avatar-mini" src="./../img/a.png">
            </div>
          </div>
        </li>
      </ul>
    </div>

    <div id="options-container">
      <ul>
        <li id="my-avatar">
          <img src="./../img/a.png">
        </li>
        <li class="user-option">
          <span class="icon icon-camera"></span>
          Change picture
        </li>
        <li class="user-option">
          <span class="icon icon-camera"></span>
          Change picture
        </li>
        <li class="user-option">
          <span class="icon icon-camera"></span>
          Change picture
        </li>
        <li class="user-option">
          <span class="icon icon-camera"></span>
          Change picture
        </li>
        <li class="user-option">
          <span class="icon icon-camera"></span>
          Change picture
        </li>
        <li class="user-option">
          <span class="icon icon-camera"></span>
          Change picture
        </li>
      </ul>
    </div>
  </body>

  <!--a> This script must be removed from the source code!! <a-->
  <script type="text/javascript">

    window.addEventListener('load', main, false);

    function main() {

      var inp = document.getElementById('text-input');

      if (!!inp) {

        inp.addEventListener('keydown', function(e) {

          /// console.log(e);

          if ([10, 13].indexOf(e.keyCode) != -1) {

            var tab = document.createElement('table');

            tab.className = 'message-container';
            tab.setAttribute('type', 'out');
            tab.setAttribute('from', 'aXNhYWM=');
            tab.setAttribute('to', 'c2FyYXk=');
            tab.innerHTML = '<tr><td class="message-zone"><div class="message">' + e.target.value + '</div></td><td class="avatar-zone"><img class="avatar" src="./../img/a.png"><img class="avatar-mini" src="./../img/a.png"></td></tr>';

            //`<div class="message-zone"><div class="message">${e.srcElement.value}</div></div><div class="avatar-zone"><img class="avatar" src="./../img/a.png"><img class="avatar-mini" src="./../img/a.png"></div>`;

            room = document.getElementById('public-room');

            room.appendChild(tab);

            room.scrollTop = room.scrollHeight;

            e.target.value = "";
            e.target.focus();

          }

        }, false);

      }

      var rooms = document.getElementsByClassName('chat-room');

      rooms = rooms || [];

      var i;

      for (i = 0; i < rooms.length; i += 1) {

        rooms[i].addEventListener('scroll', function(e) {

          var sbc, sb;
          var elem = e.target;

          sbc = elem.getElementsByClassName('scroll-bar-container');

          if (!!sbc) {

            sbc = sbc[0];

            sb = sbc.getElementsByClassName('scroll-bar');

            if (!!sb) {

              sb = sb[0];

              var rat = elem.clientHeight / elem.scrollHeight;
              var stm = elem.scrollHeight - elem.clientHeight;
              var stm1 = sbc.clientHeight * (1 - rat);

              sb.style['height'] = (sbc.clientHeight * rat) + 'px';
              sb.style['top'] = (stm1 * elem.scrollTop / stm) + 'px';

            }

          }

        }, false);

      }

    }

  </script>

</html>